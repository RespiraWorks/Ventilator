Network protocols are automatically generated by nanopb and protobuf, and the command to generate these protocols cna be called from common.sh, using the command generate_network_protocols. These protocols, returned as pythong and nanopb outputs, are returned locally and are not uploaded to the repository.

Running this script will return a python output (designated by --python_out) as well as a nanopb output (designated by --nanopb_out).

The nanopb plugin is specified by --plugin, and the directory (or directories) searched for imports is designated by -I.

An example of the code used by common.sh is shown below (where the necessary packages are installed initially and the protocol generation occurs on-demand):

   Linux:

    sudo apt install nanopb
    pip3 install protobuf
    protoc \
      --plugin=usr/bin/protoc-gen-nanopb
      -I usr/lib/python3/dist-packages/proto \
      -Icommon/generated_libs/network_protocol \
      --nanopb_out=common/generated_libs/network_protocol \
      --python_out=utils \
      common/generated_libs/network_protocol/network_protocol.proto
